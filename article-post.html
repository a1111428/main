<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>撰寫文章 - Furry Café Map</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: "Microsoft JhengHei", sans-serif; }
        body { background-color: #FFECCB; display: flex; justify-content: center; min-height: 100vh; overflow-x: hidden; }
        
        .container { width: 100%; max-width: 450px; padding: 20px; display: flex; flex-direction: column; gap: 15px; position: relative; }

        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; }
        .back-btn { width: 36px; height: 36px; border: 2.3px solid #333; border-radius: 50%; display: flex; justify-content: center; align-items: center; text-decoration: none; color: #333; }
        .post-btn { background-color: #FFB352; color: white; padding: 8px 25px; border-radius: 20px; border: none; font-weight: bold; cursor: pointer; font-size: 16px; }

        .title-section { display: flex; align-items: center; gap: 10px; font-size: 22px; color: #333; margin-top: 5px; }

        /* --- 改良後的社群圖示列 --- */
        .social-group { display: flex; gap: 12px; margin: 10px 0; overflow-x: auto; padding-bottom: 5px; }
        .social-item { 
            position: relative; 
            width: 60px; 
            height: 60px; 
            flex-shrink: 0; 
            cursor: pointer; 
            transition: all 0.3s ease; 
        }

        /* 未綁定狀態：黑白且半透明 */
        .social-item.unbind {
            filter: grayscale(100%);
            opacity: 0.4;
        }

        /* 綁定狀態：彩色且正常透明度 */
        .social-item.bind {
            filter: grayscale(0%);
            opacity: 1;
            transform: scale(1.05); /* 稍微放大表示選中 */
        }

        .avatar { width: 100%; height: 100%; background-color: #999; border-radius: 50%; display: flex; justify-content: center; align-items: center; overflow: hidden; border: 2px solid transparent; }
        .social-item.bind .avatar { border-color: #FFB352; } /* 選中時增加橘色邊框 */
        
        .avatar i { color: white; font-size: 35px; margin-top: 10px; } 
        .badge { position: absolute; bottom: 0; right: 0; width: 22px; height: 22px; border-radius: 50%; display: flex; justify-content: center; align-items: center; border: 2px solid white; font-size: 12px; color: white; }
        
        .badge.fb { background-color: #1877F2; }
        .badge.ig { background: linear-gradient(45deg, #f09433 0%, #bc1888 100%); }
        .badge.threads { background-color: #000; }
        .badge.x { background-color: #000; }
        .badge.bluesky { background-color: #0085ff; } /* */

        /* 其他區域樣式保持不變 */
        .post-content-wrapper { background-color: white; border-radius: 20px; padding: 15px; display: flex; flex-direction: column; min-height: 400px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        textarea { width: 100%; flex-grow: 1; border: none; outline: none; resize: none; font-size: 16px; color: #333; line-height: 1.5; background: transparent; }
        .toolbar { display: flex; gap: 20px; padding-top: 10px; border-top: 1px solid #EEE; margin-top: 10px; }
        .tool-btn { font-size: 24px; color: #333; cursor: pointer; text-decoration: none; }

        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); display: none; justify-content: center; align-items: center; z-index: 1000; }
        .modal-box { background: white; width: 85%; max-width: 320px; border-radius: 25px; text-align: center; overflow: hidden; }
        .modal-body { padding: 30px 20px; }
        .modal-footer { display: flex; border-top: 1px solid #EEE; }
        .modal-footer button { flex: 1; padding: 15px; border: none; background: white; font-size: 16px; font-weight: bold; cursor: pointer; }
        .btn-confirm { color: white !important; background-color: #FFB352 !important; }
        .show { display: flex !important; }
    </style>
</head>
<body>

    <div class="container">
        <header class="header">
            <a href="index.html" class="back-btn"><i class="fa-solid fa-chevron-left"></i></a>
            <button class="post-btn" onclick="openModal()">發佈</button>
        </header>

        <div class="title-section"><i class="fa-solid fa-pen-nib"></i><strong>撰寫文章</strong></div>

        <div class="social-group">
            <div class="social-item" id="post-Facebook" onclick="togglePlatform('Facebook')">
                <div class="avatar"><i class="fa-solid fa-user"></i></div>
                <div class="badge fb"><i class="fa-brands fa-facebook-f"></i></div>
            </div>
            <div class="social-item" id="post-Instagram" onclick="togglePlatform('Instagram')">
                <div class="avatar"><i class="fa-solid fa-user"></i></div>
                <div class="badge ig"><i class="fa-brands fa-instagram"></i></div>
            </div>
            <div class="social-item" id="post-Threads" onclick="togglePlatform('Threads')">
                <div class="avatar"><i class="fa-solid fa-user"></i></div>
                <div class="badge threads"><i class="fa-solid fa-at"></i></div>
            </div>
            <div class="social-item" id="post-X" onclick="togglePlatform('X')">
                <div class="avatar"><i class="fa-solid fa-user"></i></div>
                <div class="badge x"><i class="fa-brands fa-x-twitter"></i></div>
            </div>
            <div class="social-item" id="post-BlueSky" onclick="togglePlatform('BlueSky')">
                <div class="avatar"><i class="fa-solid fa-user"></i></div>
                <div class="badge bluesky"><i class="fa-solid fa-republican"></i></div> 
            </div>
        </div>

        <div class="post-content-wrapper">
            <textarea id="articleContent" placeholder="寫點什麼吧"></textarea>
            <div class="toolbar">
                <div class="tool-btn"><i class="fa-regular fa-image"></i></div>
                <div class="tool-btn"><i class="fa-solid fa-camera"></i></div>
                <a href="article-generate.html" class="tool-btn"><i class="fa-solid fa-list-check"></i></a>
                <div class="tool-btn" onclick="resetContent()"><i class="fa-solid fa-rotate-left"></i></div>
            </div>
        </div>
    </div>

    <div id="publishModal" class="modal-overlay">
        <div class="modal-box">
            <div class="modal-body">確認發佈文章？</div>
            <div class="modal-footer">
                <button onclick="closeModal()">取消</button>
                <button class="btn-confirm" onclick="confirmPublish()">確認</button>
            </div>
        </div>
    </div>

    <script>
        const platforms = ['Facebook', 'Instagram', 'Threads', 'X', 'BlueSky'];

        // 初始化：讀取狀態並套用黑白/彩色效果
        function initSocialIcons() {
            platforms.forEach(p => {
                const status = localStorage.getItem('social_' + p) || 'unbind';
                const el = document.getElementById('post-' + p);
                
                if (status === 'bind') {
                    el.classList.add('bind');
                    el.classList.remove('unbind');
                } else {
                    el.classList.add('unbind');
                    el.classList.remove('bind');
                }
            });
        }

        // 點擊切換功能
        function togglePlatform(p) {
            const currentStatus = localStorage.getItem('social_' + p) || 'unbind';
            const newStatus = (currentStatus === 'bind') ? 'unbind' : 'bind';
            
            localStorage.setItem('social_' + p, newStatus);
            initSocialIcons(); // 重新整理視覺效果
        }

        window.onload = initSocialIcons;

        function openModal() { document.getElementById('publishModal').classList.add('show'); }
        function closeModal() { document.getElementById('publishModal').classList.remove('show'); }
        function confirmPublish() { alert('文章已同步發佈至選中平台！'); closeModal(); }
        function resetContent() { if(confirm('確定清除內容？')) document.getElementById('articleContent').value = ''; } 
    </script>
</body>
</html>
