<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>餐廳詳情 - Furry Café Map</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            background-color: #f0f0f0; 
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: "Microsoft JhengHei", sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        .phone-window {
            width: 452px;
            height: 968px;
            background: #FFF9F0; 
            position: relative;
            overflow-y: auto; 
            overflow-x: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .header-gallery {
            width: 100%;
            height: 500px; 
            position: relative;
            background: #eee;
            overflow: hidden;
        }

        .photo-slider {
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            width: 100%;
            height: 100%;
            scrollbar-width: none; 
        }
        .photo-slider::-webkit-scrollbar { display: none; }
        .photo-slider img {
            width: 452px;
            height: 100%;
            flex-shrink: 0;
            object-fit: cover;
            scroll-snap-align: start;
        }

        .back-btn {
            position: fixed;
            top: 40px; 
            left: calc(50% - 226px + 20px); 
            width: 44px;
            height: 44px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #FF9800; 
            text-decoration: none;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.15);
            font-size: 20px;
        }

        .info-header {
            position: relative;
            background: #FFF9F0;
            border-radius: 30px 30px 0 0;
            margin-top: -30px;
            padding: 30px 30px 10px;
            z-index: 30;
        }

        .title-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
            flex-wrap: wrap;
            gap: 10px;
        }
        .title-left {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 8px;
            flex: 1;
            min-width: 0;
        }
        .restaurant-name { 
            font-size: 32px; 
            font-weight: 800; 
            color: #333; 
            margin: 0;
            word-break: break-word;
        }
        .pet-friendly-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            background: #FFF9F0;
            color: #FF9800;
            padding: 5px 10px;
            border-radius: 14px;
            font-size: 13px;
            font-weight: 600;
            border: 1px solid #FFE0B2;
            flex-shrink: 0;
        }
        .pet-friendly-badge i {
            font-size: 13px;
        }
        
        .action-icons { 
            display: flex;
            align-items: center;
            gap: 15px;
            flex-shrink: 0;
        }
        .action-icons i { 
            font-size: 26px; 
            color: #FF9800; 
            cursor: pointer;
            transition: transform 0.2s, color 0.2s;
        }
        .action-icons i:hover {
            transform: scale(1.1);
        }
        .action-icons i.bookmarked {
            color: #FF9800;
        }

        .meta-row {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            font-size: 16px;
            color: #555;
            flex-wrap: wrap;
        }
        .meta-row > span {
            display: flex;
            align-items: center;
            gap: 5px;
            flex-shrink: 0;
        }
        .meta-row i { color: #FF9800; width: 18px; text-align: center; flex-shrink: 0; }
        .rating { 
            margin-left: auto; 
            display: flex; 
            align-items: center; 
            font-weight: bold; 
            color: #333;
            flex-shrink: 0;
        }
        .rating i { margin-left: 5px; color: #FF9800; }

        .description { font-size: 16px; line-height: 1.7; color: #444; margin-bottom: 25px; }

        .tabs-container {
            display: flex;
            border-bottom: 1px solid #E0E0E0;
            margin-bottom: 20px;
        }
        .tab-item {
            flex: 1;
            text-align: center;
            padding: 15px 0;
            font-size: 17px;
            font-weight: 600;
            color: #888;
            cursor: pointer;
            position: relative;
        }
        .tab-item.active { color: #FF9800; }
        .tab-item.active::after {
            content: "";
            position: absolute;
            bottom: -1px; left: 50%;
            transform: translateX(-50%);
            width: 45px; height: 3px;
            background: #FF9800;
        }

        .tab-content { padding: 0 25px 120px; display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .review-card {
            background: #FFFFFF;
            border-radius: 20px;
            padding: 18px;
            margin-bottom: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03);
        }
        .user-info { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; }
        .user-avatar { width: 45px; height: 45px; border-radius: 50%; background: #FFE7C7; overflow: hidden; }
        .user-avatar img { width: 100%; height: 100%; object-fit: cover; }
        .stars { color: #FF9800; font-size: 12px; margin-top: 2px; }
        .review-text { font-size: 15px; color: #555; line-height: 1.5; }

        .article-card {
            background: #FFFFFF;
            padding: 18px;
            border-radius: 18px;
            margin-bottom: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03);
            border-left: 5px solid #FF9800;
        }
        .article-card h3 { font-size: 18px; color: #333; margin-bottom: 8px; }
        .article-card p { font-size: 14px; color: #666; line-height: 1.5; }

        .photo-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        .grid-img-wrap {
            width: 100%; height: 150px; overflow: hidden; border-radius: 15px; background: #eee;
        }
        .grid-img-wrap img { width: 100%; height: 100%; object-fit: cover; }

        .fab {
            position: fixed;
            bottom: 40px;
            right: calc(50% - 226px + 30px);
            width: 65px; height: 65px;
            background: #FF9800; color: #FFF;
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-size: 28px; box-shadow: 0 6px 15px rgba(255,152,0,0.35);
            cursor: pointer; z-index: 100;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(255,152,0,0.5);
        }
        .fab:active {
            transform: scale(0.95);
        }

        .write-options {
            position: fixed;
            bottom: 120px;
            right: calc(50% - 226px + 30px);
            display: none;
            flex-direction: column;
            gap: 15px;
            z-index: 99;
        }
        .write-options.active {
            display: flex;
        }
        .write-option-btn {
            width: 140px;
            padding: 15px 20px;
            background: white;
            color: #333;
            border-radius: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .write-option-btn:hover {
            transform: translateX(-5px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        .write-option-btn i {
            font-size: 20px;
            color: #FF9800;
        }

        .write-modal {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .write-modal.active {
            display: flex;
        }
        .write-modal-content {
            width: 90%;
            max-width: 400px;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .write-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .write-modal-header h2 {
            font-size: 24px;
            color: #333;
            margin: 0;
        }
        .write-modal-header .close-btn {
            font-size: 24px;
            color: #888;
            cursor: pointer;
            background: none;
            border: none;
        }
        .write-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .write-tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            background: #f0f0f0;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.2s;
        }
        .write-tab.active {
            background: #FF9800;
            color: white;
        }
        .write-form {
            display: none;
        }
        .write-form.active {
            display: block;
        }
        .write-form textarea {
            width: 100%;
            min-height: 120px;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            margin-bottom: 15px;
        }
        .write-form select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 15px;
        }
        .write-form button {
            width: 100%;
            padding: 15px;
            background: #FF9800;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="phone-window">
        <div class="header-gallery">
            <a href="index.html" class="back-btn"><i class="fa-solid fa-chevron-left"></i></a>
            <div class="photo-slider" id="mainSlider">
                </div>
        </div>

        <div class="info-header">
            <div class="title-row">
                <div class="title-left">
                    <h1 class="restaurant-name" id="resName">載入中...</h1>
                    <span class="pet-friendly-badge"><i class="fa-solid fa-paw"></i>寵物友善</span>
                </div>
                <div class="action-icons">
                    <i class="fa-solid fa-bookmark" id="bookmarkBtn" onclick="toggleBookmark()"></i>
                    <i class="fa-solid fa-compass" id="compassBtn" onclick="openGoogleMapsNavigation()"></i>
                </div>
            </div>

            <div class="meta-row">
                <span><i class="fa-solid fa-location-dot"></i> <span id="resAddr">地址載入中...</span></span>
                <span><i class="fa-solid fa-tag"></i> <span id="resPrice">$$$</span></span>
                <div class="rating"><span id="resRating">0.0</span> <i class="fa-solid fa-star"></i></div>
            </div>

            <div class="description">
                <p id="resDesc">正在準備您的精選餐點資訊...</p>
            </div>

            <div class="tabs-container">
                <div class="tab-item active" onclick="switchTab(event, 'reviews')">評論</div>
                <div class="tab-item" onclick="switchTab(event, 'articles')">文章</div>
                <div class="tab-item" onclick="switchTab(event, 'photos')">相片</div>
            </div>
        </div>

        <div class="tab-content active" id="reviews">
            <div id="reviewList"></div>
        </div>

        <div class="tab-content" id="articles">
            <div id="articleList"></div>
        </div>

        <div class="tab-content" id="photos">
            <div class="photo-grid" id="photoGrid"></div>
        </div>

        <div class="write-options" id="writeOptions">
            <div class="write-option-btn" onclick="openReviewModal()">
                <i class="fa-solid fa-comment"></i>
                <span>撰寫評論</span>
            </div>
            <div class="write-option-btn" onclick="goToArticlePost()">
                <i class="fa-solid fa-pen"></i>
                <span>撰寫文章</span>
            </div>
        </div>

        <div class="fab" onclick="toggleWriteOptions()"><i class="fa-solid fa-plus"></i></div>

        <div class="write-modal" id="writeModal">
            <div class="write-modal-content">
                <div class="write-modal-header">
                    <h2>撰寫</h2>
                    <button class="close-btn" onclick="closeWriteModal()"><i class="fa-solid fa-times"></i></button>
                </div>
                <div class="write-form active" id="reviewForm">
                    <textarea placeholder="分享您的用餐體驗..."></textarea>
                    <select>
                        <option>請選擇評分</option>
                        <option>★★★★★</option>
                        <option>★★★★☆</option>
                        <option>★★★☆☆</option>
                        <option>★★☆☆☆</option>
                        <option>★☆☆☆☆</option>
                    </select>
                    <button onclick="submitReview()">發布評論</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const resData = {
            "沐沐MUMU 茶飲": { price: "$100-200", rating: "4.8", addr: "高雄市楠梓區宏毅一路6號", desc: "這家店提供多樣的手工特調茶飲，店內氛圍靜謐，非常適合攜帶毛孩來喝杯涼爽的飲品休息。" },
            "Bon appétit 葩那貝蒂": { price: "$300-500", rating: "4.5", addr: "高雄市楠梓區土庫一路198號", desc: "這裡的甜點與輕食非常有層次，店內的佈置充滿法式風情，是一間非常受毛爸媽歡迎的打卡店。" },
            "究鶴餐館": { price: "$200-400", rating: "4.6", addr: "高雄市左營區富國路98號", desc: "空間寬敞的寵物友善餐館，主打健康的家常料理，食材新鮮，環境讓毛孩感到非常自在。" },
            "鸚鵡螺餐酒館-富國店": { price: "$600-800", rating: "4.9", addr: "高雄市左營區富國路101號", desc: "精緻的西式餐酒，這裡的氣氛非常浪漫，夜晚帶著毛孩來小酌一番也是一種享受。" },
            "ROSA義大利餐廳": { price: "$400-600", rating: "4.3", addr: "高雄市左營區華夏路1422號", desc: "道地的義大利麵與窯烤披薩，戶外座位區是狗狗的最佳去處，主廚還會不定期招待寵物點心。" },
            "貓之家俱樂部": { price: "$200-300", rating: "4.7", addr: "高雄市左營區新勝街26號", desc: "雖然名為貓之家，但空間規劃對狗狗也非常友善，甜點精緻且富有創意，是下午茶的好所在。" },
            "萊Bar音樂餐酒館": { price: "$500-700", rating: "4.4", addr: "高雄市左營區文自路５７１號", desc: "在這裡可以邊聽現場演奏邊享用美食，只要保持安靜，狗狗也可以一同享受這場音樂饗宴。" },
            "逅巷咖啡定食": { price: "$250-400", rating: "4.6", addr: "高雄市左營區新上街307巷15號", desc: "日式風格的溫馨小店，定食分量足夠且價格親民，是平日帶毛孩一起享用午餐的好選擇。" },
            "心滿義廚": { price: "$300-500", rating: "4.5", addr: "高雄市立信路28號", desc: "這家的義式燉飯口感豐富，店內環境乾淨清爽，是下班後帶著毛孩輕鬆用餐的完美據點。" }
        };

        const sampleReviews = [
            { name: "美食家阿強", rate: "★★★★★", text: "餐點真的很好吃，尤其是主菜的調味非常到位，狗狗也坐得很舒服。" },
            { name: "莉莉媽咪", rate: "★★★★☆", text: "這是我去過最溫馨的店，店員對狗狗很有禮貌，會主動給水碗。" },
            { name: "週末懶散人", rate: "★★★★★", text: "甜點的表現完全超出預期，每一口都是驚喜，絕對會二訪。" },
            { name: "柴犬波波", rate: "★★★★☆", text: "環境真的很乾淨，毛孩在地板上休息也很放心，大推！" },
            { name: "老饕老王", rate: "★★★★★", text: "義大利麵的Q度剛剛好，醬汁濃郁，寵物餐也做得非常用心。" }
        ];

        const sampleArticles = [
            { title: "週末私藏！五家必去的寵物友善咖啡廳", text: "今天介紹這家店真的是心頭好，不但餐點好吃，環境也很放鬆..." },
            { title: "帶著狗狗去吃飯：餐廳禮儀小指南", text: "在造訪這家店時，我發現了一些讓狗狗保持乖巧的祕訣..." },
            { title: "南台灣最強寵物餐點：雞肉慕斯實測", text: "這份餐點不僅外觀精美，營養也考慮得很全面，毛孩吃光光。" },
            { title: "避暑首選：室內寬敞的友善餐館", text: "冷氣很涼，空間規劃得很棒，不會讓狗狗感到壓迫感。" },
            { title: "我的高雄午茶地圖：與毛孩的甜蜜時光", text: "點一份下午茶套餐，看著窗外，與最愛的毛孩享受這寧靜片刻。" }
        ];

        window.addEventListener('load', function() {
            const params = new URLSearchParams(window.location.search);
            const name = params.get('name') || "沐沐MUMU 茶飲";
            const data = resData[name] || resData["沐沐MUMU 茶飲"];

            document.getElementById('resName').innerText = name;
            document.getElementById('resAddr').innerText = data.addr;
            document.getElementById('resPrice').innerText = data.price;
            document.getElementById('resRating').innerText = data.rating;
            document.getElementById('resDesc').innerText = data.desc;

            checkBookmarkStatus();

            const slider = document.getElementById('mainSlider');
            for(let i=0; i<3; i++) {
                slider.innerHTML += `<img src="https://loremflickr.com/452/500/food,cafe,dessert?random=${i + 10}" alt="food">`;
            }

            const reviewDiv = document.getElementById('reviewList');
            sampleReviews.forEach((rev, idx) => {
                reviewDiv.innerHTML += `
                    <div class="review-card">
                        <div class="user-info">
                            <div class="user-avatar"><img src="https://i.pravatar.cc/100?u=${idx + 50}"></div>
                            <div>
                                <div style="font-weight:700;">${rev.name}</div>
                                <div class="stars">${rev.rate}</div>
                            </div>
                        </div>
                        <p class="review-text">${rev.text}</p>
                    </div>`;
            });

            const articleDiv = document.getElementById('articleList');
            sampleArticles.forEach(art => {
                articleDiv.innerHTML += `
                    <div class="article-card">
                        <h3>${art.title}</h3>
                        <p>${art.text}</p>
                        <div style="font-size:12px; color:#aaa; margin-top:5px;">2025年12月28日 · 閱讀時間 3 分鐘</div>
                    </div>`;
            });

            const grid = document.getElementById('photoGrid');
            for(let i=1; i<=6; i++) {
                grid.innerHTML += `<div class="grid-img-wrap"><img src="https://loremflickr.com/300/300/meal,pasta,coffee?random=${i + 20}"></div>`;
            }
        });

        function switchTab(event, tabId) {
            document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            event.currentTarget.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        function toggleBookmark() {
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const resName = document.getElementById('resName').innerText;
            let favorites = JSON.parse(localStorage.getItem('favoriteRestaurants') || '[]');
            const index = favorites.indexOf(resName);
            
            if (index > -1) {
                favorites.splice(index, 1);
                bookmarkBtn.classList.remove('bookmarked');
                bookmarkBtn.style.color = '#FF9800';
                alert('已移除收藏');
            } else {
                favorites.push(resName);
                bookmarkBtn.classList.add('bookmarked');
                bookmarkBtn.style.color = '#FF9800';
                alert('已加入收藏');
            }
            localStorage.setItem('favoriteRestaurants', JSON.stringify(favorites));
        }

        function checkBookmarkStatus() {
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const resName = document.getElementById('resName').innerText;
            let favorites = JSON.parse(localStorage.getItem('favoriteRestaurants') || '[]');
            
            if (favorites.includes(resName)) {
                bookmarkBtn.classList.add('bookmarked');
                bookmarkBtn.style.color = '#FF9800';
            }
        }

        function toggleWriteOptions() {
            const writeOptions = document.getElementById('writeOptions');
            writeOptions.classList.toggle('active');
        }

        function openReviewModal() {
            document.getElementById('writeOptions').classList.remove('active');
            document.getElementById('writeModal').classList.add('active');
        }

        // 餐厅位置数据（用于导航和文章发布）
        const restaurantPositions = {
            "沐沐MUMU 茶飲": { pos: [22.703508, 120.301304], addr: "高雄市楠梓區宏毅一路6號" },
            "Bon appétit 葩那貝蒂": { pos: [22.736657, 120.329098], addr: "高雄市楠梓區土庫一路198號" },
            "究鶴餐館": { pos: [22.659232, 120.306703], addr: "高雄市左營區富國路98號" },
            "鸚鵡螺餐酒館-富國店": { pos: [22.660084, 120.306481], addr: "高雄市左營區富國路101號" },
            "ROSA義大利餐廳": { pos: [22.687341, 120.313866], addr: "高雄市左營區華夏路1422號" },
            "貓之家俱樂部": { pos: [22.668809, 120.299941], addr: "高雄市左營區新勝街26號" },
            "萊Bar音樂餐酒館": { pos: [22.679911, 120.311226], addr: "高雄市左營區文自路５７１號" },
            "逅巷咖啡定食": { pos: [22.669228, 120.304374], addr: "高雄市左營區新上街307巷15號" },
            "心滿義廚": { pos: [22.666260, 120.307573], addr: "高雄市立信路28號" }
        };

        function openGoogleMapsNavigation() {
            const resName = document.getElementById('resName').innerText;
            const resAddr = document.getElementById('resAddr').innerText;
            const restaurant = restaurantPositions[resName];
            
            if (restaurant) {
                const [lat, lng] = restaurant.pos;
                // 使用 Google Maps 导航链接
                const googleMapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}`;
                window.open(googleMapsUrl, '_blank');
            } else {
                // 如果没有位置信息，使用地址搜索
                const googleMapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(resAddr)}`;
                window.open(googleMapsUrl, '_blank');
            }
        }

        function goToArticlePost() {
            const resName = document.getElementById('resName').innerText;
            const resAddr = document.getElementById('resAddr').innerText;
            const restaurant = restaurantPositions[resName] || { pos: [22.732775288093578, 120.2884383523927], addr: resAddr };
            localStorage.setItem('article_restaurant', JSON.stringify({
                name: resName,
                addr: restaurant.addr,
                lat: restaurant.pos[0],
                lng: restaurant.pos[1]
            }));
            window.location.href = 'article-post.html';
        }

        function closeWriteModal() {
            document.getElementById('writeModal').classList.remove('active');
        }

        function submitReview() {
            alert('評論已發布！');
            closeWriteModal();
        }

        window.addEventListener('load', function() {
            const writeModal = document.getElementById('writeModal');
            if (writeModal) {
                writeModal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeWriteModal();
                    }
                });
            }

            document.addEventListener('click', function(e) {
                const writeOptions = document.getElementById('writeOptions');
                const fab = document.querySelector('.fab');
                if (writeOptions && writeOptions.classList.contains('active')) {
                    if (!writeOptions.contains(e.target) && !fab.contains(e.target)) {
                        writeOptions.classList.remove('active');
                    }
                }
            });
        });
    </script>
</body>
</html>